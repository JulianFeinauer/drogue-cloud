apiVersion: sources.knative.dev/v1alpha1
kind: KafkaSource
metadata:
  name: {{ include "drogue.fullname" . }}-digital-twin
  labels:
    app.kubernetes.io/name: {{ include "drogue.name" . }}-digital-twin
{{ include "drogue.labels" . | indent 4 }}
spec:
  consumerGroup: digital-twin
  bootstrapServers:
    - kafka-eventing-kafka-bootstrap.{{ .Values.knativeEventingNamespace }}.svc:9092
  topics:
    - knative-messaging-kafka.{{ .Release.Namespace }}.{{ .Values.knativeChannel }}
  sink:
    ref:
      apiVersion: flows.knative.dev/v1beta1
      kind: Sequence
      name: {{ include "drogue.fullname" . }}-digital-twin
